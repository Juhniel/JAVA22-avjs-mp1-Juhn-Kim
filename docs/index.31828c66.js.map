{"mappings":"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","sources":["src/modules/highscore.js","src/modules/game.js","src/modules/index.js"],"sourcesContent":["let ol;\r\n\r\nexport async function getHighscore() {\r\n    const url =\r\n    \"https://highscore-9b9df-default-rtdb.europe-west1.firebasedatabase.app/highscores.json\";\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    const highScore = Object.entries(data);\r\n\r\n    highScore.sort((a,b) => b[1].score - a[1].score);\r\n\r\n    const scoreListDiv = document.getElementById(\"score-list\");\r\n\r\n    if (!ol) {\r\n        ol = document.createElement(\"ol\");\r\n        scoreListDiv.append(ol);\r\n    } else {\r\n        ol.innerHTML = '';\r\n    }\r\n\r\n    for (const [key, userObj] of highScore) {\r\n        const name = userObj.name;\r\n        const score = userObj.score;\r\n\r\n        const playerItem = document.createElement(\"li\");\r\n\r\n        playerItem.innerText = `${name} - Score: ${score}`;\r\n        ol.append(playerItem);\r\n    }\r\n}\r\n  \r\n  export async function addHighscore(playerScore, playerName) {\r\n      const url = \"https://highscore-9b9df-default-rtdb.europe-west1.firebasedatabase.app/highscores.json\";\r\n      const response = await fetch(url);\r\n      const data = await response.json();\r\n      const highScore = Object.entries(data);\r\n    \r\n      // Find the lowest score and its key\r\n      let lowestScore = Infinity;\r\n      let lowestScoreKey = null;\r\n    \r\n      for (const [key, userObj] of highScore) {\r\n        if (userObj.score < lowestScore) {\r\n          lowestScore = userObj.score;\r\n          lowestScoreKey = key;\r\n        }\r\n      }\r\n    \r\n      // Replace the lowest score if the new score is higher\r\n      if (playerScore > lowestScore) {\r\n        console.log(\"The new score is higher than the lowest score\");\r\n        await patchFunction(playerName, playerScore, lowestScoreKey);\r\n        await getHighscore();\r\n      } else {\r\n        console.log(\"The new score is not high enough to enter the leaderboard\");\r\n      }\r\n    }\r\n  \r\n  \r\n  async function patchFunction(playerName, playerScore, key) {\r\n    const newURL = `https://highscore-9b9df-default-rtdb.europe-west1.firebasedatabase.app/highscores/${key}.json`;\r\n  \r\n    const newHighscore = {\r\n      name: playerName,\r\n      score: playerScore,\r\n    };\r\n  \r\n    const options = {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(newHighscore),\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n    };\r\n  \r\n    const newResponse = await fetch(newURL, options);\r\n    await newResponse.json();\r\n  }","import { getHighscore, addHighscore } from \"./highscore.js\";\r\n\r\nconst nameParagraph = document.querySelector(\"#nameParagraph\");\r\nconst rpsContainer = document.querySelector(\"#rpsContainer\");\r\nconst rockOption  = document.querySelector(\"#rockOption\");\r\nconst paperOption  = document.querySelector(\"#paperOption\");\r\nconst scissorOption  = document.querySelector(\"#scissorOption\");\r\nconst nameButton = document.querySelector(\"#nameButton\");\r\nconst winnerParagraph = document.querySelector(\"#winnerParagraph\");\r\nconst playerScoreParagraph = document.querySelector(\"#playerScore\");\r\nconst playerChoiceParagraph = document.querySelector(\"#playerChoice\");\r\nconst computerScoreParagraph = document.querySelector(\"#computerScore\");\r\nconst computerChoiceParagraph = document.querySelector(\"#computerChoiceParagraph\")\r\nconst playAgainButton = document.querySelector(\"#playAgainButton\");\r\nconst playAgainPopUp = document.querySelector(\"#popUpWindow\");\r\n\r\n\r\n\r\nlet playerChoice;\r\nlet computerChoice;\r\nlet nameInputValue;\r\nlet playerScore = 0;\r\nlet computerScore = 0;\r\n\r\nconst rpsOptions = [rockOption, paperOption, scissorOption];\r\nconst rpsOptionsString = [\"Rock\", \"Paper\", \"Scissor\"];\r\n\r\nfor(let i = 0; i < rpsOptions.length; i++) {\r\n    rpsOptions[i].addEventListener(\"click\", () => {\r\n        playerChoice = i;\r\n        computerChoice = Math.floor(Math.random()*3);\r\n        play(rpsOptions[playerChoice], rpsOptions[computerChoice]);\r\n        computerChoiceParagraph.innerText = `Computer chose: ${rpsOptionsString[computerChoice]}`;\r\n        playerChoiceParagraph.innerText = `Player chose: ${rpsOptionsString[playerChoice]}`;\r\n        if(computerScore === 1) {\r\n            playAgainPopUp.style.cssText = ` display: inline;`; \r\n            rpsContainer.style.cssText = \"display: none;\"\r\n        } \r\n    })\r\n};\r\n\r\nnameButton.addEventListener(\"click\", event => {\r\n    event.preventDefault();\r\n    nameInputValue = document.querySelector(\"#nameInput\").value;\r\n    nameParagraph.innerText = `Welcome ${nameInputValue}!`;\r\n});\r\n\r\nplayAgainButton.addEventListener(\"click\", playAgainEvent => {\r\n    playAgainEvent.preventDefault(); \r\n    playerScore = 0; \r\n    computerScore = 0; \r\n    playerScoreParagraph.innerText = `Player Score: ${playerScore}`;\r\n    computerScoreParagraph.innerText = `Computer Score: ${computerScore}`;\r\n    winnerParagraph.innerText = \"\";\r\n    computerChoiceParagraph.innerText = \"\";\r\n    playAgainPopUp.style.cssText = ` display: none;`\r\n    rpsContainer.style.cssText = \"display: flex;\"\r\n});\r\n    \r\n\r\nexport async function play(playerChoice, computerChoice) {\r\n    let result; \r\n    if (playerChoice === computerChoice) {\r\n        playerScoreParagraph.innerText = `Player Score: ${playerScore}`;\r\n        computerScoreParagraph.innerText = `Computer Score: ${computerScore}`;\r\n        result = \"It's a tie!\";\r\n    } else if (\r\n        playerChoice === rockOption && computerChoice === scissorOption ||\r\n        playerChoice === scissorOption && computerChoice === paperOption ||\r\n        playerChoice === paperOption && computerChoice === rockOption ) {\r\n        playerScore++;\r\n        playerScoreParagraph.innerText = `Player Score: ${playerScore}`;\r\n        result = \"You win!\";\r\n     } else {\r\n        computerScore++;\r\n        computerScoreParagraph.innerText = `Computer Score: ${computerScore}`;\r\n        addHighscore(playerScore, nameInputValue);\r\n        result = \"You lose!\";\r\n     }\r\n\r\n    if(playerScore === 3) {\r\n        if(nameInputValue === undefined || nameInputValue === \"\"){\r\n            winnerParagraph.innerText = \"Player won the game!\";\r\n        }else {\r\n            winnerParagraph.innerText = `${nameInputValue} won the game!`;\r\n        }\r\n    }else if(computerScore === 3) {\r\n        winnerParagraph.innerText = \"Computer won the game!\";\r\n    }else {\r\n        return winnerParagraph.innerText = result;\r\n    }\r\n\r\n    await getHighscore();\r\n}\r\n\r\n","import { play } from \"./game.js\";\r\nimport { getHighscore } from \"./highscore.js\";\r\n\r\nplay();\r\ngetHighscore();"],"names":["$1dbe79ed6ae4da18$var$ol","async","$1dbe79ed6ae4da18$export$324a59f4a7abce50","response","fetch","data","json","highScore","Object","entries","sort","a","b","score","scoreListDiv","document","getElementById","innerHTML","createElement","append","key","userObj","name","playerItem","innerText","$1dbe79ed6ae4da18$export$69f4796e91397629","playerScore","playerName","lowestScore","Infinity","lowestScoreKey","console","log","newURL","newHighscore","options","method","body","JSON","stringify","headers","newResponse","$1dbe79ed6ae4da18$var$patchFunction","$efff50eca450a049$var$nameParagraph","querySelector","$efff50eca450a049$var$rpsContainer","$efff50eca450a049$var$rockOption","$efff50eca450a049$var$paperOption","$efff50eca450a049$var$scissorOption","$efff50eca450a049$var$nameButton","$efff50eca450a049$var$winnerParagraph","$efff50eca450a049$var$playerScoreParagraph","$efff50eca450a049$var$playerChoiceParagraph","$efff50eca450a049$var$computerScoreParagraph","$efff50eca450a049$var$computerChoiceParagraph","$efff50eca450a049$var$playAgainButton","$efff50eca450a049$var$playAgainPopUp","$efff50eca450a049$var$playerChoice","$efff50eca450a049$var$computerChoice","$efff50eca450a049$var$nameInputValue","$efff50eca450a049$var$playerScore","$efff50eca450a049$var$computerScore","$efff50eca450a049$var$rpsOptions","$efff50eca450a049$var$rpsOptionsString","i","length","addEventListener","Math","floor","random","$efff50eca450a049$export$899fbdb5fa08b653","style","cssText","playerChoice","computerChoice","result","undefined","event","preventDefault","value","playAgainEvent"],"version":3,"file":"index.31828c66.js.map"}